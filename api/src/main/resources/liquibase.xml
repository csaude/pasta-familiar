<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
                  

	<changeSet id="20210222_1150" author="jpboane">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
		</preConditions>
		
		<comment>Ajust Gaac Module gaac_affinity_type Table</comment>
		
		<sql splitStatements="true" stripComments="true" >
			alter table gaac_affinity_type  change creator creator int(11) NOT NULL;
		</sql>
		
	</changeSet>
	
	<changeSet id="20210222_1005" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_affinity_type" />
			</not>
		</preConditions>
		
		<comment>added gaac affinity type table</comment>
		
		<createTable tableName="gaac_affinity_type">
			<column name="gaac_affinity_type_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="name" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="description" type="text">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="retired" type="smallint(6)" defaultValueNumeric="0">
				<constraints nullable="false" />
			</column>

			<column name="retired_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_retired" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="retire_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
		
		 <addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_affinity_type_uuid_index"  
	            tableName="gaac_affinity_type"/>  
		      
		<addForeignKeyConstraint constraintName="user_who_created_type_gaac_affinity_type"
			baseTableName="gaac_affinity_type" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="user_who_retired_gaac_affinity_type"
			baseTableName="gaac_affinity_type" baseColumnNames="retired_by"
			referencedTableName="users" referencedColumnNames="user_id" />  
			
		<sql splitStatements="true" stripComments="true" >
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(1,'Amizade','Grupo de amigos',1,now(),'c995afca-d8c1-4b7b-8b0c-37947993df6f');
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(2,'Familiar','Grupo de familias',1,now(),'d86ca8e9-1789-49cb-b7c1-dfdf7f21e1f7');
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(3,'Igreja','Grupo de irmãos que frequentam a mesma igreja',1,now(),'507b327a-c873-4e7b-a464-a37347507de7');	
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(4,'Mesquita','Grupo de irmãos muçulmanos que rezam na mesma mesquita',1,now(),'c7659bd5-27ec-4cd4-9f6e-1cb08e481c5f');
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(5,'Residencia','Grupo de vizinhos',1,now(),'a7a18ce7-b0f5-4a49-b251-0aaea5bf5206');
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(6,'Trabalho','Grupo de colegas de trabalho',1,now(),'f988c01d-274b-4a4b-b924-3bb3550b9f2a');
			insert into gaac_affinity_type(gaac_affinity_type_id,name,description,creator,date_created,uuid) values(7,'Outro','Outro tipo de grupo',1,now(),'82008fea-de96-47a5-a6f5-a22257075923');
		</sql>
			
	</changeSet>
	
	<changeSet id="20210222_1153" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
		</preConditions>
		
		<comment>Ajust Gaac Module gaac_reason_leaving_type Table</comment>
		
		<sql splitStatements="true" stripComments="true" >
			alter table gaac_reason_leaving_type  change creator creator int(11) NOT NULL;
		</sql>
		
	</changeSet>
	
	<changeSet id="20210222_1045" author="jpboane">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_reason_leaving_type" />
			</not>
		</preConditions>
		
		<comment>added gaac gaac reason leaving type table</comment>
	
		<createTable tableName="gaac_reason_leaving_type">
			<column name="gaac_reason_leaving_type_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="name" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="description" type="text">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="retired" type="smallint(6)"  defaultValueNumeric="0">
				<constraints nullable="false" />
			</column>

			<column name="retired_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_retired" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="retire_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
		
		<addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_reason_leaving_type_uuid_index"  
	            tableName="gaac_reason_leaving_type"/>  
	            
		<addForeignKeyConstraint constraintName="user_who_created_gaac_reason_leaving_type"
			baseTableName="gaac_reason_leaving_type" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="user_who_retired_gaac_reason_leaving_type"
			baseTableName="gaac_reason_leaving_type" baseColumnNames="retired_by"
			referencedTableName="users" referencedColumnNames="user_id" />
		
		<sql splitStatements="true" stripComments="true" >
			insert into gaac_reason_leaving_type(gaac_reason_leaving_type_id,name,description,creator,date_created,uuid) values(1,'Transferido Para','Transferido para outra US',1,now(),'abfc3f72-c55c-4eb6-9004-25a6735a70b9');
			insert into gaac_reason_leaving_type(gaac_reason_leaving_type_id,name,description,creator,date_created,uuid) values(2,'Desistiu','Desistiram ou foram retirados do Gaac',1,now(),'d7df4950-c2ef-44f0-a8a6-8a328a21a19c');
			insert into gaac_reason_leaving_type(gaac_reason_leaving_type_id,name,description,creator,date_created,uuid) values(3,'Obitou','Obitou em Gaac',1,now(),'52c37b18-ad27-42ed-851d-dcf1d81471da');
			insert into gaac_reason_leaving_type(gaac_reason_leaving_type_id,name,description,creator,date_created,uuid) values(4,'Suspenso','Suspenso do Gaac',1,now(),'9dd52ebe-632d-49b2-8aa8-c3a5ca185ffe');
			insert into gaac_reason_leaving_type(gaac_reason_leaving_type_id,name,description,creator,date_created,uuid) values(5,'Desintegracao','Desintegração do grupo',1,now(),'0ed9d571-36eb-453b-a1f1-785f367f92f1');
		</sql>
		
	</changeSet>
	
	<changeSet id="20210222_1155" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Ajust Gaac module gaac table</comment>
		
		<sql splitStatements="true" stripComments="true" >
			update gaac set affinity_type = 7 where affinity_type is null;
			update gaac  set location_id = 31 where location_id  is null;
			
			alter table gaac change affinity_type affinity_type int(11) NOT NULL;
			alter table gaac  change location_id location_id int(11) NOT NULL;
			alter table gaac  change end_date end_date datetime NULL;
			alter table gaac  change focal_patient_id focal_patient_id int(11) NULL;
			alter table gaac  change affinity_type affinity_type int(11) NULL;
			alter table gaac change date_crumbled date_crumbled datetime NULL DEFAULT NULL;
			alter table gaac change date_changed date_changed datetime NULL DEFAULT NULL;
			alter table gaac change voided voided smallint(6) NOT NULL DEFAULT '0';
			alter table gaac change date_changed date_changed datetime NULL DEFAULT NULL;
			alter table gaac change uuid uuid char(38) NOT NULL;
		</sql>
	</changeSet>
	
	<changeSet id="20210222_1100" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac" />
			</not>
		</preConditions>
		
		<comment>added gaac table</comment>
		
		<createTable tableName="gaac">

			<column name="gaac_id" type="int">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="name" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="description" type="text">
				<constraints nullable="true" />
			</column>

			<column name="gaac_identifier" type="varchar(50)">
				<constraints nullable="true" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>
			
			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>
			
			<column name="focal_patient_id" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="affinity_type" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="location_id" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="crumbled" type="smallint(2)">
				<constraints nullable="true" />
			</column>

			<column name="reason_crumbled" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="date_crumbled" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="smallint(6)">
				<constraints nullable="true" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="fk_gaac_affinity"
			baseTableName="gaac" baseColumnNames="affinity_type"
			referencedTableName="gaac_affinity_type" referencedColumnNames="gaac_affinity_type_id" />

		<addForeignKeyConstraint constraintName="fk_gaac_focal_patient"
			baseTableName="gaac" baseColumnNames="focal_patient_id"
			referencedTableName="patient" referencedColumnNames="patient_id"
			onDelete="SET NULL" onUpdate="CASCADE" />

		<addForeignKeyConstraint constraintName="fk_gaac_location"
			baseTableName="gaac" baseColumnNames="location_id"
			referencedTableName="location" referencedColumnNames="location_id" />


		<addForeignKeyConstraint constraintName="fk_gaac_user_who_changed"
			baseTableName="gaac" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_gaac_user_who_created"
			baseTableName="gaac" baseColumnNames="creator" referencedTableName="users"
			referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_gaac_user_who_voided"
			baseTableName="gaac" baseColumnNames="voided_by" referencedTableName="users"
			referencedColumnNames="user_id" />
	</changeSet>
	
	<changeSet id="20210222_1212" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Ajust Gaac module gaac_member table</comment>
		
		<sql splitStatements="true" stripComments="true" >
			alter table gaac_member change gaac_id gaac_id int(11) NOT NULL;
			alter table gaac_member change member_id member_id int(11) NOT NULL;
			alter table gaac_member change creator creator int(11) NOT NULL;
			alter table gaac_member change date_changed date_changed datetime NULL DEFAULT NULL;
			alter table gaac_member change voided voided smallint(6) NOT NULL DEFAULT '0';
			alter table gaac_member change uuid uuid char(38) NOT NULL;
		</sql>
	</changeSet>
	
	<changeSet id="20210222_1115" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_member" />
			</not>
		</preConditions>
		
		<comment>added gaac member table</comment>
		
		<createTable tableName="gaac_member">

			<column name="gaac_member_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="gaac_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="member_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="reason_leaving_type" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="description" type="text">
				<constraints nullable="true" />
			</column>

			<column name="leaving" type="smallint(1)" defaultValueNumeric="0">
				<constraints nullable="true" />
			</column>

			<column name="restart" type="smallint(1)" defaultValueNumeric="0">
				<constraints nullable="true" />
			</column>

			<column name="restart_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="voided" type="smallint(6)" defaultValueNumeric="0">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="fk_gaac_member_gaac"
			baseTableName="gaac_member" baseColumnNames="gaac_id"
			referencedTableName="gaac" referencedColumnNames="gaac_id" onDelete="CASCADE"
			onUpdate="CASCADE" />

		<addForeignKeyConstraint constraintName="fk_gaac_member_patient"
			baseTableName="gaac_member" baseColumnNames="member_id"
			referencedTableName="patient" referencedColumnNames="patient_id"
			onDelete="CASCADE" onUpdate="CASCADE" />

		<addForeignKeyConstraint constraintName="fk_gaac_member_reason_leaving"
			baseTableName="gaac_member" baseColumnNames="reason_leaving_type"
			referencedTableName="gaac_reason_leaving_type" referencedColumnNames="gaac_reason_leaving_type_id" />

		<addForeignKeyConstraint constraintName="fk_gaac_member_user_who_changed"
			baseTableName="gaac_member" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_gaac_member_user_who_created"
			baseTableName="gaac_member" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_gaac_member_user_who_voided"
			baseTableName="gaac_member" baseColumnNames="voided_by"
			referencedTableName="users" referencedColumnNames="user_id" />
	</changeSet>
	
	<changeSet  id="20210222_1202" author="jpboane">
	
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Ajust Gaac module gaac_family table</comment>
		
		<sql splitStatements="true" stripComments="true" >
			update gaac_family set family_identifier = 'UNDIFINED' where family_identifier is null;
			update gaac_family set end_date = null where end_date = '0000-00-00';
			update gaac_family set date_changed = null where date_changed = '0000-00-00';
			update gaac_family set location_id = 31 where location_id  is null;
			update gaac_family set crumbled = 0 where crumbled  is null;
		
			alter table gaac_family DROP FOREIGN KEY fk_family_focal_patient;
			
			
			alter table gaac_family change family_identifier family_identifier varchar(50) NOT NULL;
			alter table gaac_family change end_date end_date datetime NULL;
			alter table gaac_family change focal_patient_id focal_patient_id int(11) NULL; 
			alter table gaac_family  change location_id location_id int(11) NOT NULL;
			alter table gaac_family change crumbled crumbled smallint(2) NOT NULL DEFAULT 0;
			alter table gaac_family change creator creator int(11) NOT NULL;
			alter table gaac_family change changed_by changed_by int(11) NULL;
			alter table gaac_family change uuid uuid char(38) NOT NULL;
			
			alter table gaac_family add constraint `fk_family_focal_patient` FOREIGN KEY (`focal_patient_id`) REFERENCES `patient` (`patient_id`);
		</sql>
	</changeSet>
	
	
	<changeSet id="20210222_1124" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_family" />
			</not>
		</preConditions>
		
		<comment>added gaac family table</comment>
		
		<createTable tableName="gaac_family">

			<column name="family_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="family_identifier" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="focal_patient_id" type="int(11)">
				<constraints nullable="true" />
			</column>
			
			<column name="location_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="crumbled" type="smallint(2)" defaultValueNumeric="0">
				<constraints nullable="false" />
			</column>

			<column name="reason_crumbled" type="varchar(255)">
				<constraints nullable="true" />
			</column>
			
			
			<column name="date_crumbled" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="smallint(6)" defaultValueNumeric="0">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>
			
			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addForeignKeyConstraint constraintName="fk_family_focal_patient"
			baseTableName="gaac_family" baseColumnNames="focal_patient_id"
			referencedTableName="patient" referencedColumnNames="patient_id" />

		<addForeignKeyConstraint constraintName="fk_family_location"
			baseTableName="gaac_family" baseColumnNames="location_id"
			referencedTableName="location" referencedColumnNames="location_id" />

		<addForeignKeyConstraint constraintName="fk_family_user_who_created"
			baseTableName="gaac_family" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_family_user_who_changed"
			baseTableName="gaac_family" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_family_user_who_voided"
			baseTableName="gaac_family" baseColumnNames="voided_by"
			referencedTableName="users" referencedColumnNames="user_id" />
		
	</changeSet>
	
	<changeSet id="20210222_1215" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
		<comment>Ajust Gaac module gaac_family_member table</comment>
	
		<sql splitStatements="true" stripComments="true" >
			alter table gaac_family_member change family_id family_id int(11) NOT NULL;
			alter table gaac_family_member change member_id member_id int(11) NOT NULL;
			alter table gaac_family_member change family_member_relacao family_member_relacao int(11) NULL;
			alter table gaac_family_member change creator creator int(11) NOT NULL;
		</sql>
	</changeSet>
	
	<changeSet id="20210222_1131" author="jpboane">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_family_member" />
			</not>
		</preConditions>
		
		<comment>added gaac family member table</comment>
		
		<createTable tableName="gaac_family_member">

			<column name="family_member_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="family_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="member_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="family_member_relacao" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="reason_leaving_type" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="leaving" type="smallint(1)" defaultValueNumeric="0">
				<constraints nullable="true" />
			</column>

			<column name="restart" type="smallint(1)">
				<constraints nullable="true" />
			</column>

			<column name="restart_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="smallint(6)"  defaultValueNumeric="0">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>

		</createTable>

		<addForeignKeyConstraint constraintName="fk_family_member_patient"
			baseTableName="gaac_family_member" baseColumnNames="member_id"
			referencedTableName="patient" referencedColumnNames="patient_id" />

		<addForeignKeyConstraint constraintName="fk_family_member_family"
			baseTableName="gaac_family_member" baseColumnNames="family_id"
			referencedTableName="gaac_family" referencedColumnNames="family_id" />
			

		<addForeignKeyConstraint constraintName="fk_family_member_relacao"
			baseTableName="gaac_family_member" baseColumnNames="family_member_relacao"
			referencedTableName="relationship" referencedColumnNames="relationship_id" />


		<addForeignKeyConstraint constraintName="fk_family_member_reason_leaving"
			baseTableName="gaac_family_member" baseColumnNames="reason_leaving_type"
			referencedTableName="gaac_reason_leaving_type" referencedColumnNames="gaac_reason_leaving_type_id" />

		<addForeignKeyConstraint constraintName="fk_family_member_user_who_created"
			baseTableName="gaac_family_member" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_family_member_user_who_changed"
			baseTableName="gaac_family_member" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

		<addForeignKeyConstraint constraintName="fk_family_member_user_who_voided"
			baseTableName="gaac_family_member" baseColumnNames="voided_by"
			referencedTableName="users" referencedColumnNames="user_id" />
	</changeSet>
	
</databaseChangeLog>