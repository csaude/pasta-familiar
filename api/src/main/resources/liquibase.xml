<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">               
                  
	<changeSet  author="jpboane"  id="20210226_0001">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
		</preConditions>
		
		<comment>Remove default value on gaac_affinity_type.creator</comment>
	
	    <dropDefaultValue 
	        columnName="creator"  
	        tableName="gaac_affinity_type"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0002">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
		</preConditions>
		
		<comment>Remove default value on gaac_reason_leaving_type.creator</comment>
	
	    <dropDefaultValue 
	        columnName="creator"  
	        tableName="gaac_reason_leaving_type"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0003">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.end_date</comment>
		
	    <dropDefaultValue 
	        columnName="end_date"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0004">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.focal_patient_id</comment>
		
	    <dropDefaultValue 
	        columnName="focal_patient_id"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0005">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.affinity_type</comment>
		
	    <dropDefaultValue 
	    	columnName="affinity_type"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0006">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.creator</comment>
		
	    <dropDefaultValue 
	        columnName="creator"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0007">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.changed_by</comment>
		
	    <dropDefaultValue 
	        columnName="changed_by"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0008">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.date_changed</comment>
		
	    <dropDefaultValue 
	        columnName="date_changed"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0009">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Remove default value on gaac.date_crumbled</comment>
		
	    <dropDefaultValue 
	        columnName="date_crumbled"  
	        tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0010">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Set location to 31 (Provincia da Zambezia)  where location is null on Gaac Table</comment>
		
	    <update tableName="gaac">
	        <column name="location_id" value="31" />
	        <where>location_id is null</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0011">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Set affinity_type to 7 (Outo) where affinity_type is null on Gaac Table</comment>
		
	    <update tableName="gaac">
	        <column name="affinity_type" value="7" />
	        <where>affinity_type is null</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0012">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Add not null constraint to gaac.affinity_type</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="int(11)"
	            columnName="affinity_type"   
	            tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0013">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Add not null constraint to gaac.location_id</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="int(11)"
	            columnName="location_id"   
	            tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0014">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Add not null constraint to gaac.uuid</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="char(38)"
	            columnName="uuid"   
	            tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0015">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_member.gaac_id</comment>
		
	    <dropDefaultValue 
	        columnName="gaac_id"  
	        tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0016">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_member.member_id</comment>
		
	    <dropDefaultValue 
	        columnName="member_id"  
	        tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0017">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_member.creator</comment>
		
	    <dropDefaultValue 
	        columnName="creator"  
	        tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0018">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_member.changed_by</comment>
		
	    <dropDefaultValue 
	        columnName="changed_by"  
	        tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0019">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_member.date_changed</comment>
		
	    <dropDefaultValue 
	        columnName="date_changed"  
	        tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0020">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_member.date_changed</comment>
		
	    <dropDefaultValue 
	        columnName="date_changed"  
	        tableName="gaac_member"/>  
	</changeSet>
	 
	<changeSet  author="jpboane"  id="20210226_0021">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Add default (0) value to gaac_member.voided</comment>
		
	    <addDefaultValue  
	            columnName="voided"  
	            defaultValue="0"   
	            tableName="gaac_member"/>  
	</changeSet>

	<changeSet  author="jpboane"  id="20210226_0022">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Add not null constraint to gaac_member.uuid</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="char(38)"
	            columnName="uuid"   
	            tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0023">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Update gaac_family.family_identifier to 'UNDIFINED' on all null family_identifier</comment>
		
	    <update tableName="gaac_family">
	        <column name="family_identifier" value="UNDIFINED" />
	        <where>family_identifier is null</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0024">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Update gaac_family.end_date to 'null' on all end_date with '0000-00-00' value</comment>
		
	    <update tableName="gaac_family">
	        <column name="end_date" />
	        <where>end_date = '0000-00-00'</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0025">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Update gaac_family.date_changed to 'null' on all end_date with '0000-00-00' value</comment>
		
	    <update tableName="gaac_family">
	        <column name="date_changed" />
	        <where>date_changed = '0000-00-00'</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0026">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Update location_id to 31 (Provincia da Zambezia)  where location is null on gaac_family Table</comment>
		
	    <update tableName="gaac_family">
	        <column name="location_id" value="31"/>
	        <where>location_id is null</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0027">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Update crumbled to 0 where gaac_family is null on gaac_family Table</comment>
		
	    <update tableName="gaac_family">
	        <column name="crumbled" value="0"/>
	        <where>crumbled is null</where>
	    </update>
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0028">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Add not null constraint to gaac_family.family_identifier</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="varchar(50)"
	            columnName="family_identifier"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0029">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Remove default value on gaac_family.end_date</comment>
		
	    <dropDefaultValue 
	        columnName="end_date"  
	        tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0030">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Remove default value on gaac_family.focal_patient_id</comment>
		
	    <dropDefaultValue 
	        columnName="focal_patient_id"  
	        tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0031">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Add not null constraint to gaac_family.location_id</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="int(11)"
	            columnName="location_id"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0032">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Add default (0) value to gaac_family.crumbled</comment>
		
	    <addDefaultValue  
	            columnName="crumbled"  
	            defaultValue="0"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0033">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Add not null constraint to gaac_family.crumbled</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="boolean"
	            columnName="crumbled"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0034">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Remove default value on gaac_family.creator</comment>
		
	    <dropDefaultValue 
	        columnName="creator"  
	        tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0035">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Remove default value on gaac_family.changed_by</comment>
		
	    <dropDefaultValue 
	        columnName="changed_by"  
	        tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0036">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
		<comment>Add not null constraint to gaac_family.uuid</comment>
		
	    <addNotNullConstraint  
	    		columnDataType="char(38)"
	            columnName="uuid"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0037">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_family_member.creator</comment>
		
	    <dropDefaultValue 
	        columnName="creator"  
	        tableName="gaac_family_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0038">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_family_member.family_id</comment>
		
	    <dropDefaultValue 
	        columnName="family_id"  
	        tableName="gaac_family_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0039">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_family_member.member_id</comment>
		
	    <dropDefaultValue 
	        columnName="member_id"  
	        tableName="gaac_family_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210226_0040">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
		<comment>Remove default value on gaac_family_member.family_member_relacao</comment>
		
	    <dropDefaultValue 
	        columnName="family_member_relacao"  
	        tableName="gaac_family_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0001">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="retired"  
	            newDataType="boolean"   
	            tableName="gaac_affinity_type"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0002">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="retired"  
	            newDataType="boolean"   
	            tableName="gaac_affinity_type"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0003">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="voided"  
	            newDataType="boolean"   
	            tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0004">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="crumbled"  
	            newDataType="boolean"   
	            tableName="gaac"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0005">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="voided"  
	            newDataType="boolean"   
	            tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0006">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="leaving"  
	            newDataType="boolean"   
	            tableName="gaac_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0007">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="restart"  
	            newDataType="boolean"   
	            tableName="gaac_member"/>  
	</changeSet>	
		
	<changeSet  author="jpboane"  id="20210301_0008">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="voided"  
	            newDataType="boolean"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0009">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="crumbled"  
	            newDataType="boolean"   
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0010">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="voided"  
	            newDataType="boolean"   
	            tableName="gaac_family_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0011">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="leaving"  
	            newDataType="boolean"   
	            tableName="gaac_family_member"/>  
	</changeSet>
	
	<changeSet  author="jpboane"  id="20210301_0012">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		</preConditions>
		
	    <modifyDataType  
	            columnName="restart"  
	            newDataType="boolean"   
	            tableName="gaac_family_member"/>  
	</changeSet>	
	
	<changeSet  author="jpboane"  id="20210301_0013">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
		</preConditions>
		
		<comment>Change gaac_affinity_type.description type from text to varchar</comment>
		
	    <modifyDataType  
	            columnName="description"  
	            newDataType="varchar(1024)"   
	            tableName="gaac_affinity_type"/>  
	</changeSet>	
	
	<changeSet  author="jpboane"  id="20210301_0014">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
		</preConditions>
		
		<comment>Change gaac_reason_leaving_type.description type from text to varchar</comment>
		
	    <modifyDataType  
	            columnName="description"  
	            newDataType="varchar(1024)"   
	            tableName="gaac_reason_leaving_type"/>  
	</changeSet>	

	<changeSet  author="jpboane"  id="20210301_0015">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		</preConditions>
		
		<comment>Change gaac.description type from text to varchar</comment>
		
	    <modifyDataType  
	            columnName="description"  
	            newDataType="varchar(1024)"   
	            tableName="gaac"/>  
	</changeSet>

	<changeSet  author="jpboane"  id="20210301_0016">  
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		</preConditions>
		
		<comment>Change gaac_member.description type from text to varchar</comment>
		
	    <modifyDataType  
	            columnName="description"  
	            newDataType="varchar(1024)"   
	            tableName="gaac_member"/>  
	</changeSet>	
	
	<changeSet author="jpboane" id="20210226_0041">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_affinity_type" />
			</not>
		</preConditions>
		
		<comment>Add gaac affinity type table</comment>
		
		<createTable tableName="gaac_affinity_type">
			<column name="gaac_affinity_type_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="name" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="description" type="varchar(1024)">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="retired" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="retired_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_retired" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="retire_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
			
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0042" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<not>
		       <foreignKeyConstraintExists foreignKeyName="user_who_created_type_gaac_affinity_type" />
		    </not>
		</preConditions>
		 		
		<addForeignKeyConstraint constraintName="user_who_created_type_gaac_affinity_type"
			baseTableName="gaac_affinity_type" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0043" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="user_who_retired_gaac_affinity_type" />
		    </not>
		</preConditions>
		 		
		<addForeignKeyConstraint constraintName="user_who_retired_gaac_affinity_type"
			baseTableName="gaac_affinity_type" baseColumnNames="retired_by"
			referencedTableName="users" referencedColumnNames="user_id" /> 

	</changeSet>
		
		
	<changeSet author="jpboane"  id="20210226_0044" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<not>
				<indexExists indexName="gaac_affinity_type_uuid_index"/>
			</not>
			
		</preConditions>
		
		 <addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_affinity_type_uuid_index"  
	            tableName="gaac_affinity_type"/>  
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0045" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 1</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="1"/>  
	        <column  name="name"  value="Amizade"/>  
	        <column  name="description"  value="Grupo de amigos"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="c995afca-d8c1-4b7b-8b0c-37947993df6f"/>  
	    </insert>  
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0046" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 2</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="2"/>  
	        <column  name="name"  value="Familiar"/>  
	        <column  name="description"  value="Grupo de familias"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="d86ca8e9-1789-49cb-b7c1-dfdf7f21e1f7"/>  
	    </insert>  
	</changeSet>	
	
	<changeSet author="jpboane"  id="20210226_0047" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
		
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 3</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="3"/>  
	        <column  name="name"  value="Igreja"/>  
	        <column  name="description"  value="Grupo de irmãos que frequentam a mesma igreja"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="507b327a-c873-4e7b-a464-a37347507de7"/>  
	    </insert>  
	</changeSet>	
		
	<changeSet author="jpboane"  id="20210226_0048" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 4</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="4"/>  
	        <column  name="name"  value="Mesquita"/>  
	        <column  name="description"  value="Grupo de irmãos muçulmanos que rezam na mesma mesquita"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="c7659bd5-27ec-4cd4-9f6e-1cb08e481c5f"/>  
	    </insert>  
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0049" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 5</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="5"/>  
	        <column  name="name"  value="Residencia"/>  
	        <column  name="description"  value="Grupo de vizinhos"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="a7a18ce7-b0f5-4a49-b251-0aaea5bf5206"/>  
	    </insert>  
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0050" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 6</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="6"/>  
	        <column  name="name"  value="Trabalho"/>  
	        <column  name="description"  value="Grupo de colegas de trabalho"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="f988c01d-274b-4a4b-b924-3bb3550b9f2a"/>  
	    </insert>  
	</changeSet>
		
	<changeSet author="jpboane"  id="20210226_0051" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_affinity_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_affinity_type WHERE gaac_affinity_type_id = 7</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_affinity_type">  
	        <column  name="gaac_affinity_type_id"  value="7"/>  
	        <column  name="name"  value="Outro"/>  
	        <column  name="description"  value="Outro tipo de grupo"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="82008fea-de96-47a5-a6f5-a22257075923"/>  
	    </insert>  
	</changeSet>
	
	
	<changeSet author="jpboane" id="20210226_0052" >
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_reason_leaving_type" />
			</not>
		</preConditions>
		
		<comment>added gaac gaac reason leaving type table</comment>
	
		<createTable tableName="gaac_reason_leaving_type">
			<column name="gaac_reason_leaving_type_id" type="int(11)">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="name" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="description" type="varchar(1024)">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="retired" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="retired_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_retired" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="retire_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet author="jpboane" id="20210226_0053" >
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<not>
				<indexExists indexName="gaac_reason_leaving_type_uuid_index"/>
			</not>
		</preConditions>
		
		<addUniqueConstraint  
            columnNames="uuid"  
            constraintName="gaac_reason_leaving_type_uuid_index"  
            tableName="gaac_reason_leaving_type"/>  
	 </changeSet>
	            
	<changeSet author="jpboane" id="20210226_0054" >
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<not>
		       <foreignKeyConstraintExists foreignKeyName="user_who_created_gaac_reason_leaving_type" />
		    </not>
		</preConditions>
		
		<addForeignKeyConstraint constraintName="user_who_created_gaac_reason_leaving_type"
			baseTableName="gaac_reason_leaving_type" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />
	 </changeSet>
	            	            
	<changeSet author="jpboane" id="20210226_0055" >
		
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<not>
		       <foreignKeyConstraintExists foreignKeyName="user_who_retired_gaac_reason_leaving_type" />
		    </not>
		</preConditions>
		
		<addForeignKeyConstraint constraintName="user_who_retired_gaac_reason_leaving_type"
			baseTableName="gaac_reason_leaving_type" baseColumnNames="retired_by"
			referencedTableName="users" referencedColumnNames="user_id" />
	 </changeSet>
	            	 	            
	<changeSet author="jpboane"  id="20210226_0056" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_reason_leaving_type WHERE gaac_reason_leaving_type_id = 1</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_reason_leaving_type">  
	        <column  name="gaac_reason_leaving_type_id"  value="1"/>  
	        <column  name="name"  value="Transferido Para"/>  
	        <column  name="description"  value="Transferido para outra US"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="abfc3f72-c55c-4eb6-9004-25a6735a70b9"/>  
	    </insert>  
	</changeSet>
			
	<changeSet author="jpboane"  id="20210226_0057" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_reason_leaving_type WHERE gaac_reason_leaving_type_id = 2</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_reason_leaving_type">  
	        <column  name="gaac_reason_leaving_type_id"  value="2"/>  
	        <column  name="name"  value="Desistiu"/>  
	        <column  name="description"  value="Desistiram ou foram retirados do Gaac"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="d7df4950-c2ef-44f0-a8a6-8a328a21a19c"/>  
	    </insert>  
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0058" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_reason_leaving_type WHERE gaac_reason_leaving_type_id = 3</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_reason_leaving_type">  
	        <column  name="gaac_reason_leaving_type_id"  value="3"/>  
	        <column  name="name"  value="Obitou"/>  
	        <column  name="description"  value="Obitou em Gaac"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="52c37b18-ad27-42ed-851d-dcf1d81471da"/>  
	    </insert>  
	</changeSet>

	<changeSet author="jpboane"  id="20210226_0059" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_reason_leaving_type WHERE gaac_reason_leaving_type_id = 4</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_reason_leaving_type">  
	        <column  name="gaac_reason_leaving_type_id"  value="4"/>  
	        <column  name="name"  value="Suspenso"/>  
	        <column  name="description"  value="Suspenso do Gaac"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="9dd52ebe-632d-49b2-8aa8-c3a5ca185ffe"/>  
	    </insert>  
	</changeSet>

	<changeSet author="jpboane"  id="20210226_0100" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_reason_leaving_type" />
			
			<sqlCheck  expectedResult="0">SELECT count(*) FROM gaac_reason_leaving_type WHERE gaac_reason_leaving_type_id = 5</sqlCheck>
		</preConditions>
		
	    <insert tableName="gaac_reason_leaving_type">  
	        <column  name="gaac_reason_leaving_type_id"  value="5"/>  
	        <column  name="name"  value="Desintegracao"/>  
	        <column  name="description"  value="Desintegração do grupo"/>  
	        <column  name="creator"  value="1"/>  
	        <column  name="date_created"  valueDate="now()"/>  
	        <column  name="uuid"  value="0ed9d571-36eb-453b-a1f1-785f367f92f1"/>  
	    </insert>  
	</changeSet>			
	
	<changeSet author="jpboane" id="20210226_0101">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac" />
			</not>
		</preConditions>
		
		<comment>added gaac table</comment>
		
		<createTable tableName="gaac">

			<column name="gaac_id" type="int(11)" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="name" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="description" type="varchar(1024)">
				<constraints nullable="true" />
			</column>

			<column name="gaac_identifier" type="varchar(50)">
				<constraints nullable="true" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>
			
			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>
			
			<column name="focal_patient_id" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="affinity_type" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="location_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="crumbled" type="boolean" defaultValueBoolean="false">
				<constraints nullable="true" />
			</column>

			<column name="reason_crumbled" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="date_crumbled" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0102" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_affinity" />
		    </not>
		</preConditions>
		 		
		<addForeignKeyConstraint constraintName="fk_gaac_affinity"
			baseTableName="gaac" baseColumnNames="affinity_type"
			referencedTableName="gaac_affinity_type" referencedColumnNames="gaac_affinity_type_id" /> 

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0103" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_affinity" />
		    </not>
		</preConditions>
		 		
		<addForeignKeyConstraint constraintName="fk_gaac_focal_patient"
			baseTableName="gaac" baseColumnNames="focal_patient_id"
			referencedTableName="patient" referencedColumnNames="patient_id"
			onDelete="SET NULL" onUpdate="CASCADE" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0104" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_location" />
		    </not>
		</preConditions>
		 		
		<addForeignKeyConstraint constraintName="fk_gaac_location"
			baseTableName="gaac" baseColumnNames="location_id"
			referencedTableName="location" referencedColumnNames="location_id" />

	</changeSet>	

	<changeSet author="jpboane"  id="20210226_0105" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_user_who_changed" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_user_who_changed"
			baseTableName="gaac" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>


	<changeSet author="jpboane"  id="20210226_0106" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_user_who_created" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_user_who_created"
			baseTableName="gaac" baseColumnNames="creator" referencedTableName="users"
			referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0107" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_user_who_voided" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_user_who_voided"
				baseTableName="gaac" baseColumnNames="voided_by" referencedTableName="users"
				referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0108" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac" />
			
			<not>
				<indexExists indexName="gaac_uuid_index"/>
			</not>
			
		</preConditions>
		
		 <addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_uuid_index"  
	            tableName="gaac"/>  
	</changeSet>
	
	<changeSet author="jpboane" id="20210226_0109">
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_member" />
			</not>
		</preConditions>
		
		<comment>added gaac member table</comment>
		
		<createTable tableName="gaac_member">

			<column name="gaac_member_id" type="int(11)" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="gaac_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="member_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="reason_leaving_type" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="description" type="varchar(1024)">
				<constraints nullable="true" />
			</column>

			<column name="leaving" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="restart" type="boolean" defaultValueBoolean="false">
				<constraints nullable="true" />
			</column>

			<column name="restart_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
		
	</changeSet>
	

	<changeSet author="jpboane"  id="20210226_0110" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_member_gaac" />
		    </not>
		</preConditions>
	
	<addForeignKeyConstraint constraintName="fk_gaac_member_gaac"
			baseTableName="gaac_member" baseColumnNames="gaac_id"
			referencedTableName="gaac" referencedColumnNames="gaac_id" onDelete="CASCADE"
			onUpdate="CASCADE" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0111" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_member_patient" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_member_patient"
			baseTableName="gaac_member" baseColumnNames="member_id"
			referencedTableName="patient" referencedColumnNames="patient_id"
			onDelete="CASCADE" onUpdate="CASCADE" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0112" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_member_reason_leaving" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_member_reason_leaving"
			baseTableName="gaac_member" baseColumnNames="reason_leaving_type"
			referencedTableName="gaac_reason_leaving_type" referencedColumnNames="gaac_reason_leaving_type_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0113" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_member_user_who_changed" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_member_user_who_changed"
			baseTableName="gaac_member" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0114" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_member_user_who_created" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_member_user_who_created"
			baseTableName="gaac_member" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0115" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_gaac_member_user_who_voided" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_gaac_member_user_who_voided"
			baseTableName="gaac_member" baseColumnNames="voided_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0116" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_member" />
			
			<not>
				<indexExists indexName="gaac_member_uuid_index"/>
			</not>
			
		</preConditions>
		
		 <addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_member_uuid_index"  
	            tableName="gaac_member"/>  
	</changeSet>
	
	
	<changeSet author="jpboane" id="20210226_0117" >
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_family" />
			</not>
		</preConditions>
		
		<comment>added gaac family table</comment>
		
		<createTable tableName="gaac_family">

			<column name="family_id" type="int(11)" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="family_identifier" type="varchar(50)">
				<constraints nullable="false" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="focal_patient_id" type="int(11)">
				<constraints nullable="true" />
			</column>
			
			<column name="location_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="crumbled" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="reason_crumbled" type="varchar(255)">
				<constraints nullable="true" />
			</column>
			
			<column name="date_crumbled" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>
			
			<column name="changed_by" type="int">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>
			
			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
		
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0118" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_focal_patient" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_family_focal_patient"
			baseTableName="gaac_family" baseColumnNames="focal_patient_id"
			referencedTableName="patient" referencedColumnNames="patient_id" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0119" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_location" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_family_location"
			baseTableName="gaac_family" baseColumnNames="location_id"
			referencedTableName="location" referencedColumnNames="location_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0120" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_user_who_created" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_family_user_who_created"
			baseTableName="gaac_family" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0121" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_user_who_changed" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_family_user_who_changed"
			baseTableName="gaac_family" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0122" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_user_who_voided" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_family_user_who_voided"
			baseTableName="gaac_family" baseColumnNames="voided_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>

	<changeSet author="jpboane"  id="20210226_0123" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
			
			<not>
				<indexExists indexName="gaac_family_uuid_index"/>
			</not>
			
		</preConditions>
		
		 <addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_family_uuid_index"  
	            tableName="gaac_family"/>  
	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0124" >
		
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="gaac_family_member" />
			</not>
		</preConditions>
		
		<comment>added gaac family member table</comment>
		
		<createTable tableName="gaac_family_member">

			<column name="family_member_id" type="int(11)" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>

			<column name="family_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="member_id" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="family_member_relacao" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="start_date" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="end_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="reason_leaving_type" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="leaving" type="boolean" defaultValueBoolean="false">
				<constraints nullable="true" />
			</column>

			<column name="restart" type="boolean" defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="restart_date" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>

			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="changed_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_changed" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="voided" type="boolean"  defaultValueBoolean="false">
				<constraints nullable="false" />
			</column>

			<column name="voided_by" type="int(11)">
				<constraints nullable="true" />
			</column>

			<column name="date_voided" type="datetime">
				<constraints nullable="true" />
			</column>

			<column name="void_reason" type="varchar(255)">
				<constraints nullable="true" />
			</column>

			<column name="uuid" type="char(38)">
				<constraints nullable="false" />
			</column>

		</createTable>

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0125" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_member_patient" />
		    </not>
		</preConditions>
	
		<addForeignKeyConstraint constraintName="fk_family_member_patient"
			baseTableName="gaac_family_member" baseColumnNames="member_id"
			referencedTableName="patient" referencedColumnNames="patient_id" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0126" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_member_user_who_voided" />
		    </not>
		</preConditions>

		<addForeignKeyConstraint constraintName="fk_family_member_user_who_voided"
			baseTableName="gaac_family_member" baseColumnNames="voided_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>
	
		<changeSet author="jpboane"  id="20210226_0127" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_member_user_who_changed" />
		    </not>
		</preConditions>

		<addForeignKeyConstraint constraintName="fk_family_member_user_who_changed"
			baseTableName="gaac_family_member" baseColumnNames="changed_by"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0128" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_member_user_who_created" />
		    </not>
		</preConditions>

		<addForeignKeyConstraint constraintName="fk_family_member_user_who_created"
			baseTableName="gaac_family_member" baseColumnNames="creator"
			referencedTableName="users" referencedColumnNames="user_id" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0129" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_member_relacao" />
		    </not>
		</preConditions>

		<addForeignKeyConstraint constraintName="fk_family_member_relacao"
			baseTableName="gaac_family_member" baseColumnNames="family_member_relacao"
			referencedTableName="relationship" referencedColumnNames="relationship_id" />

	</changeSet>
	
	<changeSet author="jpboane"  id="20210226_0130" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family_member" />
		
		    <not>
		       <foreignKeyConstraintExists foreignKeyName="fk_family_member_reason_leaving" />
		    </not>
		</preConditions>

		<addForeignKeyConstraint constraintName="fk_family_member_reason_leaving"
			baseTableName="gaac_family_member" baseColumnNames="reason_leaving_type"
			referencedTableName="gaac_reason_leaving_type" referencedColumnNames="gaac_reason_leaving_type_id" />

	</changeSet>	
			
	<changeSet author="jpboane"  id="20210226_0131" >
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="gaac_family" />
			
			<not>
				<indexExists indexName="gaac_family_member_uuid_index"/>
			</not>
			
		</preConditions>
		
		 <addUniqueConstraint  
	            columnNames="uuid"  
	            constraintName="gaac_family_member_uuid_index"  
	            tableName="gaac_family_member"/>  
	</changeSet>
	
</databaseChangeLog>